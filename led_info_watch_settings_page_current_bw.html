  <!DOCTYPE html>
  <html>
  <head>
    <title>LED Info Watch - Settings</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="http://code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.css">
    <script src="http://code.jquery.com/jquery-2.1.0.min.js"></script>
    <script src="http://code.jquery.com/mobile/1.4.1/jquery.mobile-1.4.1.min.js"></script>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <script src='script.js'></script>

    <style>
    .ui-header .ui-title 
    { 
      margin-left: 1em;
      margin-right: 1em;
      text-overflow: clip;
    }
    .color-box
    {
      width: 12vw;
      height: 12vw;
      border-style: none;
      margin: 1.5vw;
      display:inline-block;
    }
    .selected-color-box
    {
      border-width: 1.5vw;
      border-style: solid;
      border-color: black;
      margin: 0px;
    }
    .color-row
    {
      border-style: none;
      border-width: 0px;
    }
    .hidden
    {
      display: none;
    }
    </style>

  </head>
  <body>
    <div data-role="page" id="main">
      <div data-role="header" class="jqm-header">
        <h1>LED Info Watch</h1>
      </div>
      <div data-role="content">

        <div data-role="collapsible-set" data-theme="c" data-content-theme="d" data-mini="false">

        <!--   <div data-role="collapsible">
          <h3>Background Color</h3>
          <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

            <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

              <input name="key0" id ="000000" value="000000" type="radio">
              <label for="000000">
                <canvas id="000000_canvas" width="200" height="25" style="border:1px solid #d3d3d3;"></canvas>
              </label>

              <input name="key0" id ="FFFFFF" value="FFFFFF" type="radio">
              <label for="FFFFFF">
                <canvas id="FFFFFF_canvas" width="200" height="25" style="border:1px solid #d3d3d3;"></canvas>
              </label>
            </fieldset>
          </fieldset>
        </div>

      <script>
        var x_width = 200;
        var y_width = 50;
        var c;
        var ctx;

        c_000000 = document.getElementById("000000_canvas");
        ctx_000000 = c_000000.getContext("2d");
        ctx_000000.fillStyle="#000000";
        ctx_000000.fillRect(0, 0, x_width, y_width);

        c_FFFFFF = document.getElementById("FFFFFF_canvas");
        ctx_FFFFFF = c_FFFFFF.getContext("2d");
        ctx_FFFFFF.fillStyle="#FFFFFF";
        ctx_FFFFFF.fillRect(0, 0, x_width, y_width);

        </script> 

              <div data-role="collapsible">
                <h3>Font Color</h3>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

                  <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

                    <input name="key1" id ="000000" data-type="hex" value="000000" type="radio">
                    <label for="000000">
                      <canvas id="000000_canvas_2" width="200" height="25" style="border:1px solid #d3d3d3;"></canvas>
                    </label>

                    <input name="key1" id ="FFFFFF" value="FFFFFF" type="radio">
                    <label for="FFFFFF">
                      <canvas id="FFFFFF_canvas_2" width="200" height="25" style="border:1px solid #d3d3d3;"></canvas>
                    </label>

                  </fieldset>

                </fieldset>
              </div>


              <script>
              var x_width = 200;
              var y_width = 50;
              var c;
              var ctx;

              c_000000 = document.getElementById("000000_canvas_2");
              ctx_000000 = c_000000.getContext("2d");
              ctx_000000.fillStyle="#000000";
              ctx_000000.fillRect(0, 0, x_width, y_width);

              c_FFFFFF = document.getElementById("FFFFFF_canvas_2");
              ctx_FFFFFF = c_FFFFFF.getContext("2d");
              ctx_FFFFFF.fillStyle="#FFFFFF";
              ctx_FFFFFF.fillRect(0, 0, x_width, y_width);

              </script> -->

              <div data-role="collapsible">
                <h3>Look & Feel</h3>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Invert Colors</legend> 
                  <input name="key14" id="key14-0"
                  data-type="int"
                  value="0"
                  checked="checked"
                  type="radio">
                  <label for="key14-0">Off</label> 

                  <input name="key14" id="key14-1"
                  data-type="int"
                  value="1"
                  type="radio">
                  <label for="key14-1">On</label>
                </fieldset>
                
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Bluetooth Status (third circle)</legend> 
                  <input name="key15" id="key15-0"
                  data-type="int"
                  value="0"
                  checked="checked"
                  type="radio">
                  <label for="key15-0">Off</label> 

                  <input name="key15" id="key15-1"
                  data-type="int"
                  value="1"
                  type="radio">
                  <label for="key15-1">On</label>
                </fieldset>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Hourly Vibrate</legend> 
                  <input name="key2" id="key2-0"
                  data-type="int"
                  value="0"
                  type="radio">
                  <label for="key2-0">Short</label>

                  <input name="key2" id="key2-1"
                  data-type="int"
                  value="1"
                  type="radio">
                  <label for="key2-1">Long</label> 

                  <input name="key2" id="key2-2"
                  data-type="int"
                  value="2"
                  checked="checked"
                  type="radio">
                  <label for="key2-2">Off</label> 
                </fieldset>
               <!--  <br>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

                  <legend>Sleep Hours - Disables hourly vibrate and weather fetching</legend> 

                  <input name="key10" id="key10-1"
                  data-type="int"
                  value="1"
                  type="radio">
                  <label for="key10-1">On</label> 

                  <input name="key10" id="key10-0"
                  data-type="int"
                  value="0"
                  type="radio"
                  checked="checked">
                  <label for="key10-0">Off</label>

                </fieldset>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Sleep Hours Start Time</legend> 
                  <select id="key11" name="key11">
                    <option id="key11-0" value="0">12:00 AM</option>
                    <option id="key11-1" value="1">01:00 AM</option>
                    <option id="key11-2" value="2">02:00 AM</option>
                    <option id="key11-3" value="3">03:00 AM</option>
                    <option id="key11-4" value="4">04:00 AM</option>
                    <option id="key11-5" value="5">05:00 AM</option>
                    <option id="key11-6" value="6">06:00 AM</option>
                    <option id="key11-7" value="7">07:00 AM</option>
                    <option id="key11-8" value="8">08:00 AM</option>
                    <option id="key11-9" value="9">09:00 AM</option>
                    <option id="key11-10" value="10">10:00 AM</option>
                    <option id="key11-11" value="11">11:00 AM</option>
                    <option id="key11-12" value="12">12:00 PM</option>
                    <option id="key11-13" value="13">01:00 PM</option>
                    <option id="key11-14" value="14">02:00 PM</option>
                    <option id="key11-15" value="15">03:00 PM</option>
                    <option id="key11-16" value="16">04:00 PM</option>
                    <option id="key11-17" value="17">05:00 PM</option>
                    <option id="key11-18" value="18">06:00 PM</option>
                    <option id="key11-19" value="19">07:00 PM</option>
                    <option id="key11-20" value="20">08:00 PM</option>
                    <option id="key11-21" value="21">09:00 PM</option>
                    <option id="key11-22" value="22">10:00 PM</option>
                    <option id="key11-23" value="23">11:00 PM</option>
                  </select>
                </fieldset>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

                  <legend>Sleep Hours End Time</legend> 
                  <select id="key12" name="key12">
                    <option id="key12-0" value="0">12:00 AM</option>
                    <option id="key12-1" value="1">01:00 AM</option>
                    <option id="key12-2" value="2">02:00 AM</option>
                    <option id="key12-3" value="3">03:00 AM</option>
                    <option id="key12-4" value="4">04:00 AM</option>
                    <option id="key12-5" value="5">05:00 AM</option>
                    <option id="key12-6" value="6">06:00 AM</option>
                    <option id="key12-7" value="7">07:00 AM</option>
                    <option id="key12-8" value="8">08:00 AM</option>
                    <option id="key12-9" value="9">09:00 AM</option>
                    <option id="key12-10" value="10">10:00 AM</option>
                    <option id="key12-11" value="11">11:00 AM</option>
                    <option id="key12-12" value="12">12:00 PM</option>
                    <option id="key12-13" value="13">01:00 PM</option>
                    <option id="key12-14" value="14">02:00 PM</option>
                    <option id="key12-15" value="15">03:00 PM</option>
                    <option id="key12-16" value="16">04:00 PM</option>
                    <option id="key12-17" value="17">05:00 PM</option>
                    <option id="key12-18" value="18">06:00 PM</option>
                    <option id="key12-19" value="19">07:00 PM</option>
                    <option id="key12-20" value="20">08:00 PM</option>
                    <option id="key12-21" value="21">09:00 PM</option>
                    <option id="key12-22" value="22">10:00 PM</option>
                    <option id="key12-23" value="23">11:00 PM</option>
                  </select>

                </fieldset>
                <br>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

                  <legend>Battery Status (center bars)</legend> 
                  <input name="key13" id="key13-1"
                  data-type="int"
                  value="1"
                  checked="checked"
                  type="radio">
                  <label for="key13-1">On</label> 

                  <input name="key13" id="key13-0"
                  data-type="int"
                  value="0"
                  type="radio">
                  <label for="key13-0">Off</label>

                </fieldset>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">

                  <legend>Black outline around center graphics (for use with certain colored backgrounds)</legend> 
                  <input name="key6" id="key6-1"
                  data-type="int"
                  value="1"
                  checked="checked"
                  type="radio">
                  <label for="key6-1">On</label> 

                  <input name="key6" id="key6-0"
                  data-type="int"
                  value="0"
                  type="radio">
                  <label for="key6-0">Off</label>

                </fieldset> -->
              </div>

              <div data-role="collapsible">
                <h3>Weather</h3>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Update Interval</legend> 

                  <input name="key9" id="key9-30"
                  data-type="int"
                  value="30"
                  type="radio">
                  <label for="key9-30">30 minutes</label>

                  <input name="key9" id="key9-60"
                  data-type="int"
                  value="60"
                  checked="checked"
                  type="radio">
                  <label for="key9-60">60 minutes</label> 
                  
                </fieldset>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Temperaure Units</legend> 

                  <input name="key3" id="key3-0"
                  data-type="int"
                  value="0"
                  checked="checked"
                  type="radio">
                  <label for="key3-0">Celsius</label>

                  <input name="key3" id="key3-1"
                  data-type="int"
                  value="1"
                  type="radio">
                  <label for="key3-1">Fahrenheit</label> 

                </fieldset>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Weather Location</legend> 

                  <input name="key4" id="key4-0"
                  data-type="int"
                  value="0"
                  checked="checked"
                  type="radio">
                  <label for="key4-0">Current Location</label>

                  <input name="key4" id="key4-1"
                  data-type="int"
                  value="1"
                  type="radio">
                  <label for="key4-1">Manual Location (Zip Code)</label> 

                  <input name="key4" id="key4-2"
                  data-type="int"
                  value="2"
                  type="radio">
                  <label for="key4-2">Manual Location (Lat/Long)</label> 
                </fieldset>
                <br>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Zip Code</legend> 

                  <input name="key5" id="key5-0"
                  type="text">
                  <label for="key5-0">Zip Code:</label>
                </fieldset>

                <h3>OR</h3>
                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Latitude</legend> 

                  <input name="key7" id="key7-0"
                  type="text">
                  <label for="key7-0">Latitude:</label>
                </fieldset>

                <fieldset data-role="controlgroup" data-type="vertical" data-mini="true">
                  <legend>Longitude</legend> 

                  <input name="key8" id="key8-0"
                  type="text">
                  <label for="key8-0">Longitude:</label>
                </fieldset>

              </div>
              <br />
              <div class="ui-body ui-body-c">
                <fieldset class="ui-grid-a">
                  <div class="ui-block-a"><button type="submit" data-theme="d" id="b-cancel">Cancel</button></div>
                  <div class="ui-block-b"><button type="submit" data-theme="a" id="b-submit">Save</button></div>
                </fieldset>
              </div>
            </div>

          </div>

          <script>
          function saveOptions() {
            var options = {
              'KEY_HIGHLIGHT_COLOR':  $("input[name=key0]:checked").val(),
              'KEY_LOCATION_COLOR':        $("input[name=key1]:checked").val(),
              'KEY_VIBRATE':          Number( $("input[name=key2]:checked").val() ),
              'KEY_UNIT':             Number( $("input[name=key3]:checked").val() ),
              'KEY_LOCATION':         Number( $("input[name=key4]:checked").val() ),
              'KEY_ZIP_CODE':         $("input[name=key5]").val().substring(0,5),
              'KEY_MIDDLE_OUTLINE':   Number( $("input[name=key6]:checked").val() ),
              'KEY_LATITUDE':         $("input[name=key7]").val(),
              'KEY_LONGITUDE':        $("input[name=key8]").val(),
              'KEY_UPDATE_INTERVAL':  Number( $("input[name=key9]:checked").val() ),
              'KEY_SLEEP':            Number( $("input[name=key10]:checked").val() ),
              'KEY_SLEEP_START':      Number( $('select[name="key11"]').val() ),
              'KEY_SLEEP_END':        Number( $('select[name="key12"]').val() ),
              'KEY_BATTERY_METER':   Number( $("input[name=key13]:checked").val() ),
              'KEY_INVERT':           Number( $("input[name=key14]:checked").val() ),
              'KEY_SHOW_BLUETOOTH':   Number( $("input[name=key15]:checked").val() )
            }
            return options;
          }
          $().ready(function() {
           if (typeof window.localStorage !== "undefined") {
            console.log("Not undefined :)");
            if (window.localStorage.tutorial) {
              ls_pto = JSON.parse(window.localStorage.tutorial);
            // the Pebble webview dies on the next line...
            $("input[name=key0][id="+ls_pto["KEY_HIGHLIGHT_COLOR"]+"]").prop('checked',true);
            $("input[name=key0]").checkboxradio('refresh');

            $("input[name=key1][id="+ls_pto["KEY_LOCATION_COLOR"]+"]").prop('checked',true);
            $("input[name=key1]").checkboxradio('refresh');

            $("input[name=key2][id=key2-"+ls_pto["KEY_VIBRATE"]+"]").prop('checked',true);
            $("input[name=key2]").checkboxradio('refresh');

            $("input[name=key3][id=key3-"+ls_pto["KEY_UNIT"]+"]").prop('checked',true);
            $("input[name=key3]").checkboxradio('refresh');

            $("input[name=key4][id=key4-"+ls_pto["KEY_LOCATION"]+"]").prop('checked',true);
            $("input[name=key4]").checkboxradio('refresh');
            
            $("#key5-0").val("" + ls_pto["KEY_ZIP_CODE"] + "");
            $("#key5-0").textinput('refresh');

            $("input[name=key6][id=key6-"+ls_pto["KEY_MIDDLE_OUTLINE"]+"]").prop('checked',true);
            $("input[name=key6]").checkboxradio('refresh');
            
            $("#key7-0").val("" + ls_pto["KEY_LATITUDE"] + "");
            $("#key7-0").textinput('refresh');
            
            $("#key8-0").val("" + ls_pto["KEY_LONGITUDE"] + "");
            $("#key8-0").textinput('refresh');

            $("input[name=key9][id=key9-"+ls_pto["KEY_UPDATE_INTERVAL"]+"]").prop('checked',true);
            $("input[name=key9]").checkboxradio('refresh');
            
            $("input[name=key10][id=key10-"+ls_pto["KEY_SLEEP"]+"]").prop('checked',true);
            $("input[name=key10]").checkboxradio('refresh');

            $("#key11").val("" + ls_pto["KEY_SLEEP_START"] +"");
            $("#key11").selectmenu("refresh");

            $("#key12").val("" + ls_pto["KEY_SLEEP_END"] +"");
            $("#key12").selectmenu("refresh");
            
            $("input[name=key13][id=key13-"+ls_pto["KEY_BATTERY_METER"]+"]").prop('checked',true);
            $("input[name=key13]").checkboxradio('refresh');
            
            $("input[name=key14][id=key14-"+ls_pto["KEY_INVERT"]+"]").prop('checked',true);
            $("input[name=key14]").checkboxradio('refresh');
            
            $("input[name=key15][id=key15-"+ls_pto["KEY_SHOW_BLUETOOTH"]+"]").prop('checked',true);
            $("input[name=key15]").checkboxradio('refresh');
          }
        }
        $("#b-cancel").click(function() {
          console.log("Cancel");
          document.location = "pebblejs://close";
        });
        $("#b-submit").click(function() {

          console.log("Submit");
          ls_pto = JSON.stringify(saveOptions());
          if (typeof window.localStorage !== "undefined") {
            window.localStorage.tutorial = ls_pto;
          }
          var location = "pebblejs://close#" + ls_pto;
          console.log("Warping to: " + location);
          console.log(location);
          document.location = location;
        });
      });
    </script> </div>
  </body>
  </html>